<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="1.1 The Data | EDLD 610 Final Project: Visualizing Star Wars" />
<meta property="og:type" content="book" />





<meta name="author" content="Cameron S. Kay" />



<meta name="description" content="1.1 The Data | EDLD 610 Final Project: Visualizing Star Wars">

<title>1.1 The Data | EDLD 610 Final Project: Visualizing Star Wars</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/darkly.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li class="has-sub"><a href="index.html#hello-world"><span class="toc-section-number">1</span> Hello World</a><ul>
<li class="has-sub"><a href="1-1-the-data.html#the-data"><span class="toc-section-number">1.1</span> The Data</a><ul>
<li><a href="1-1-the-data.html#the-people"><span class="toc-section-number">1.1.1</span> The People</a></li>
<li><a href="1-1-the-data.html#the-starships"><span class="toc-section-number">1.1.2</span> The Starships</a></li>
<li><a href="1-1-the-data.html#the-planets"><span class="toc-section-number">1.1.3</span> The Planets</a></li>
</ul></li>
<li class="has-sub"><a href="1-2-the-visualizations.html#the-visualizations"><span class="toc-section-number">1.2</span> The Visualizations</a><ul>
<li><a href="1-2-the-visualizations.html#the-people-1"><span class="toc-section-number">1.2.1</span> The People</a></li>
<li><a href="1-2-the-visualizations.html#the-starships-1"><span class="toc-section-number">1.2.2</span> The Starships</a></li>
<li><a href="1-2-the-visualizations.html#the-planets-1"><span class="toc-section-number">1.2.3</span> The Planets</a></li>
</ul></li>
</ul></li>
<li><a href="2-people.html#people"><span class="toc-section-number">2</span> The People</a></li>
<li><a href="3-hello-world-1.html#hello-world-1"><span class="toc-section-number">3</span> Hello World</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="the-data" class="section level2">
<h2><span class="header-section-number">1.1</span> The Data</h2>
<p>I would like to use three of the datasets from The Star Wars API (SWAPI): (1) the characters, (2) the planets, and (3) the starships. Fortunately, the <code>repurrrsive</code> package contains the Star Wars datasets.</p>
<div id="the-people" class="section level3">
<h3><span class="header-section-number">1.1.1</span> The People</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load and format data</span>
people &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="kw">t</span>(<span class="kw">list.cbind</span>(sw_people))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># convert the star wars people dataframe to a tibble</span>
<span class="st">  </span><span class="kw">as_tibble</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># select only the columns between name and gender (inclusive)</span>
<span class="st">  </span><span class="kw">select</span>(name<span class="op">:</span>gender) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># mutates columns that are lists to non-lists</span>
<span class="st">  </span><span class="kw">mutate_if</span>(is.list, <span class="op">~</span>(<span class="kw">unlist</span>(.))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># mutate all columns and replaces the text &quot;unknown&quot; with &quot;NA&quot;</span>
<span class="st">  </span><span class="kw">mutate_all</span>(<span class="op">~</span>(<span class="kw">na_if</span>(., <span class="st">&quot;unknown&quot;</span>))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># converts height and mass to numeric variables</span>
<span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(height, mass), <span class="op">~</span>(<span class="kw">as.numeric</span>(.))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># extracts birth year and converts it to numeric; replace &quot;n/a&quot; values with </span>
<span class="st">  </span><span class="co"># droid for hair_color and gender</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">birth_year =</span> <span class="kw">parse_number</span>(<span class="kw">as.character</span>(birth_year)),
         <span class="dt">hair_color =</span> <span class="kw">if_else</span>(gender <span class="op">==</span><span class="st"> &quot;n/a&quot;</span>, <span class="st">&quot;droid&quot;</span>, hair_color),
         <span class="dt">gender     =</span> <span class="kw">if_else</span>(gender <span class="op">==</span><span class="st"> &quot;n/a&quot;</span>, <span class="st">&quot;droid&quot;</span>, gender))

<span class="co"># look at first ten rows of tidied dataet</span>
<span class="kw">head</span>(people, <span class="dt">n =</span> 10L)</code></pre></div>
<pre><code>## # A tibble: 10 x 8
##    name      height  mass hair_color skin_color eye_color birth_year gender
##    &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; 
##  1 Luke Sky…    172    77 blond      fair       blue            19   male  
##  2 C-3PO        167    75 droid      gold       yellow         112   droid 
##  3 R2-D2         96    32 droid      white, bl… red             33   droid 
##  4 Darth Va…    202   136 none       white      yellow          41.9 male  
##  5 Leia Org…    150    49 brown      light      brown           19   female
##  6 Owen Lars    178   120 brown, gr… light      blue            52   male  
##  7 Beru Whi…    165    75 brown      light      blue            47   female
##  8 R5-D4         97    32 droid      white, red red             NA   droid 
##  9 Biggs Da…    183    84 black      light      brown           24   male  
## 10 Obi-Wan …    182    77 auburn, w… fair       blue-gray       57   male</code></pre>
</div>
<div id="the-starships" class="section level3">
<h3><span class="header-section-number">1.1.2</span> The Starships</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load and format data</span>
starships &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="kw">t</span>(<span class="kw">list.cbind</span>(sw_starships))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># convert the star ways starship dataset to a tibble</span>
<span class="st">  </span><span class="kw">as_tibble</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># clean column names</span>
<span class="st">  </span>janitor<span class="op">::</span><span class="kw">clean_names</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># select only those columns between name and starship (inclusive)</span>
<span class="st">  </span><span class="kw">select</span>(name<span class="op">:</span>starship_class) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># mutate columns that are lists to non-lists</span>
<span class="st">  </span><span class="kw">mutate_if</span>(is.list, <span class="op">~</span>(<span class="kw">unlist</span>(.))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># mutate all columns, replacing &quot;unknown&quot; with &quot;NA&quot;  </span>
<span class="st">  </span><span class="kw">mutate_all</span>(<span class="op">~</span>(<span class="kw">na_if</span>(., <span class="st">&quot;unknown&quot;</span>))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># convert numeric columns to numerics</span>
<span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(cost_in_credits,
                 length,
                 crew,
                 passengers,
                 cargo_capacity,
                 hyperdrive_rating,
                 mglt), <span class="op">~</span>(<span class="kw">as.numeric</span>(.))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># extract the max_atmosphering_speed and convert starship_class to a lowercase</span>
<span class="st">  </span><span class="co"># factor</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">max_atmosphering_speed =</span> <span class="kw">parse_number</span>(max_atmosphering_speed),
         <span class="dt">starship_class         =</span> <span class="kw">as.factor</span>(<span class="kw">tolower</span>(starship_class))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># seperate consumables into a value and unit (e.g., days, weeks, months, </span>
<span class="st">  </span><span class="co"># years)</span>
<span class="st">  </span><span class="kw">separate</span>(consumables, <span class="kw">c</span>(<span class="st">&quot;con_n&quot;</span>, <span class="st">&quot;con_unit&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># convert units to numeric values and multiply with the consumable value to </span>
<span class="st">  </span><span class="co"># provide the amount of consumable in the total number of days</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">con_unit    =</span> <span class="kw">case_when</span>(con_unit <span class="op">==</span><span class="st"> &quot;day&quot;</span>   <span class="op">~</span><span class="st"> &quot;1&quot;</span>,
                                 con_unit <span class="op">==</span><span class="st"> &quot;week&quot;</span>  <span class="op">~</span><span class="st"> &quot;7&quot;</span>,
                                 con_unit <span class="op">==</span><span class="st"> &quot;month&quot;</span> <span class="op">~</span><span class="st"> &quot;30&quot;</span>,
                                 con_unit <span class="op">==</span><span class="st"> &quot;years&quot;</span> <span class="op">~</span><span class="st"> &quot;365&quot;</span>),
         <span class="dt">consumables =</span> <span class="kw">as.numeric</span>(con_n) <span class="op">*</span><span class="st"> </span><span class="kw">as.numeric</span>(con_unit)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># retain only the new consumables column (i.e., drop con_n and con_unit)</span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">starts_with</span>(<span class="st">&quot;con_&quot;</span>))

<span class="co"># look at first ten rows of tidied dataet</span>
<span class="kw">head</span>(starships, <span class="dt">n =</span> 10L) </code></pre></div>
<pre><code>## # A tibble: 10 x 13
##    name  model manufacturer cost_in_credits  length max_atmospherin…   crew
##    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;                  &lt;dbl&gt;   &lt;dbl&gt;            &lt;dbl&gt;  &lt;dbl&gt;
##  1 Sent… Sent… Sienar Flee…          240000  3.80e1             1000      5
##  2 Deat… DS-1… Imperial De…   1000000000000  1.20e5               NA 342953
##  3 Mill… YT-1… Corellian E…          100000  3.44e1             1050      4
##  4 Y-wi… BTL … Koensayr Ma…          134999  1.40e1             1000      2
##  5 X-wi… T-65… Incom Corpo…          149999  1.25e1             1050      1
##  6 TIE … Twin… Sienar Flee…              NA  9.20e0             1200      1
##  7 Exec… Exec… Kuat Drive …      1143350000 NA                    NA 279144
##  8 Slav… Fire… Kuat System…              NA  2.15e1             1000      1
##  9 Impe… Lamb… Sienar Flee…          240000  2.00e1              850      6
## 10 EF76… EF76… Kuat Drive …         8500000  3.00e2              800    854
## # … with 6 more variables: passengers &lt;dbl&gt;, cargo_capacity &lt;dbl&gt;,
## #   hyperdrive_rating &lt;dbl&gt;, mglt &lt;dbl&gt;, starship_class &lt;fct&gt;,
## #   consumables &lt;dbl&gt;</code></pre>
</div>
<div id="the-planets" class="section level3">
<h3><span class="header-section-number">1.1.3</span> The Planets</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load and format data</span>
planets &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="kw">t</span>(<span class="kw">list.cbind</span>(sw_planets))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># convert star wars planets dataset to a tibble</span>
<span class="st">  </span><span class="kw">as.tibble</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># retain only columns between name and population (inclusive)</span>
<span class="st">  </span><span class="kw">select</span>(name<span class="op">:</span>population) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># mutate columns that are lists to non-lists</span>
<span class="st">  </span><span class="kw">mutate_if</span>(is.list, <span class="op">~</span>(<span class="kw">unlist</span>(.))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># mutate all columns, replacing &quot;unknown&quot; with &quot;NA&quot;  </span>
<span class="st">  </span><span class="kw">mutate_all</span>(<span class="op">~</span>(<span class="kw">na_if</span>(., <span class="st">&quot;unknown&quot;</span>))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># convert numeric columns to type numeric</span>
<span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(rotation_period,
                 orbital_period,
                 diameter,
                 surface_water,
                 population),
            <span class="op">~</span>(<span class="kw">as.numeric</span>(.))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># calculate values of interest</span>
<span class="st">  </span><span class="kw">mutate</span>(
         <span class="co"># make surface water a proportion</span>
         <span class="dt">surface_water   =</span> surface_water <span class="op">/</span><span class="st"> </span><span class="dv">100</span>,
         <span class="co"># calculate population in millions</span>
         <span class="dt">population_mils =</span> population <span class="op">/</span><span class="st"> </span><span class="dv">1000000</span>,
         <span class="co"># calculate a planet&#39;s distance from the sun (Kepler&#39;s 3rd law)</span>
         <span class="dt">au              =</span> (((orbital_period <span class="op">/</span><span class="st"> </span><span class="dv">365</span>) <span class="op">^</span><span class="st"> </span><span class="dv">2</span>) <span class="op">^</span><span class="st"> </span>(<span class="dv">1</span><span class="op">/</span><span class="dv">3</span>)),
         <span class="co"># convert gravity to a number</span>
         <span class="dt">gravity         =</span> <span class="kw">parse_number</span>(<span class="kw">as.character</span>(gravity)),
         <span class="co"># calculate the force of gravity</span>
         <span class="dt">g               =</span> gravity <span class="op">*</span><span class="st"> </span><span class="fl">9.8</span>, 
         <span class="co"># calculate radius</span>
         <span class="dt">radius          =</span> diameter <span class="op">/</span><span class="st"> </span><span class="dv">2</span>, 
         <span class="co"># calculate planet mass (ish)</span>
         <span class="dt">mass            =</span> (g <span class="op">*</span><span class="st"> </span>(radius<span class="op">^</span><span class="dv">2</span>)) <span class="op">/</span><span class="st"> </span>grav_constant,
         <span class="co"># calculate planet area</span>
         <span class="dt">area            =</span> pi <span class="op">*</span><span class="st"> </span>(radius<span class="op">^</span><span class="dv">2</span>))

<span class="co"># look at first ten rows of tidied dataet</span>
<span class="kw">head</span>(planets, <span class="dt">n =</span> 10L) </code></pre></div>
<pre><code>## # A tibble: 10 x 15
##    name  rotation_period orbital_period diameter climate gravity terrain
##    &lt;chr&gt;           &lt;dbl&gt;          &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;  
##  1 Alde…              24            364    12500 temper…    1    grassl…
##  2 Yavi…              24           4818    10200 temper…    1    jungle…
##  3 Hoth               23            549     7200 frozen     1.1  tundra…
##  4 Dago…              23            341     8900 murky     NA    swamp,…
##  5 Besp…              12           5110   118000 temper…    1.5  gas gi…
##  6 Endor              18            402     4900 temper…    0.85 forest…
##  7 Naboo              26            312    12120 temper…    1    grassy…
##  8 Coru…              24            368    12240 temper…    1    citysc…
##  9 Kami…              27            463    19720 temper…    1    ocean  
## 10 Geon…              30            256    11370 temper…    0.9  rock, …
## # … with 8 more variables: surface_water &lt;dbl&gt;, population &lt;dbl&gt;,
## #   population_mils &lt;dbl&gt;, au &lt;dbl&gt;, g &lt;dbl&gt;, radius &lt;dbl&gt;, mass &lt;dbl&gt;,
## #   area &lt;dbl&gt;</code></pre>
</div>
</div>
<p style="text-align: center;">
<a href="index.html"><button class="btn btn-default">Previous</button></a>
<a href="1-2-the-visualizations.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
